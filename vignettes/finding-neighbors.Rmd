---
title: "Finding neighbors"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{finding-neighbors}
  %\VignetteEncoding{UTF-8}
  %\VignetteEngine{knitr::rmarkdown}
editor_options: 
  chunk_output_type: inline
---

```{r include=FALSE}
knitr::opts_chunk$set(collapse  = TRUE,
                      comment   = "#>",
                      out.width = "50%",
                      dpi       = 96,
                      fig.align = "center")
```


```{r 'setup', echo=FALSE}
library("bridge")
library("ggplot2")
library("patchwork")
```

```{r 'load-data', echo=FALSE}
transects_quadrats <- expand.grid("transect" = 1:3, "quadrat" = 1:5)
transects_only     <- 1:3
quadrats_only      <- 1:5

nodes_transects_quadrats <- create_nodes_labels(
  transects = transects_quadrats$"transect", 
  quadrats  = transects_quadrats$"quadrat")

nodes_transects_only <- create_nodes_labels(
  transects = transects_only)

nodes_quadrats_only <- create_nodes_labels(
  quadrats = quadrats_only)
```




The package `bridge` is designed to work with two-dimensional networks (i.e. 
regular grids), where one dimension is called **transect** and the other is
called **quadrat**. By convention, the dimension **transect** corresponds to 
the x-axis, and the **quadrat** corresponds to the y-axis (Fig. 1). 
Note that the number of sampling units in both dimensions can be different.




```{r 'cb-transects-quadrats', fig.height=8, fig.width=5, echo=FALSE, fig.cap="Figure 1. Two-dimensional network"}
gg_chessboard(nodes_transects_quadrats)
```


\


The package `bridge` can also deal with one-dimensional networks 
(either **transects-only** or **quadrats-only**). If the sampling has been 
conducted along one single dimension, a fictitious second dimension will be 
created (for the purpose of the package).


\


For instance, if the sampling has been conducted only through transects, a
fictitious quadrat will be added with only one quadrat (Fig. 2).



```{r 'cb-transects-only', fig.height=2.1, fig.width=5, echo=FALSE, fig.cap="Figure 2. Transects-only network"}
gg_chessboard(nodes_transects_only)
```


\


On the other hand, if the sampling has been conducted only through quadrats, a
fictitious transect will be added with only one transect (Fig. 3).


```{r 'cb-quadrats-only', fig.height=8, fig.width=2.1, echo=FALSE, fig.cap="Figure 3. Quadrats-only network", out.width='16%'}
gg_chessboard(nodes_quadrats_only)
```


\


The network can be undirected or directed. If the network is **directed**, it will 
have (by default) these two orientations:
- from bottom to top for quadrats (i.e. along transects), and
- from left to right for transects (i.e. along quadrats).


\


## Nodes labeling


It's important to note that, even the package handles spatial networks, it does not 
explicitly use spatial coordinates to find neighbors. Instead, it will find 
neighbors based on **nodes labels** (i.e. sampling units).

Nodes labels will be of the form: `1-2`, where `1` is the identifier of 
the transect, and `2`, the identifier 
of the quadrat (created by the function is missing).


## Chessboard

Ignoring the spatial coordinates of the sampling design, we can consider it as
a chessboard of dimensions `t` x `q`, with `t`, the number of transects, 
and `q`, the number of quadrats.




