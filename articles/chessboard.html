<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Get started • chessboard</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Get started">
<meta property="og:description" content="chessboard">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">chessboard</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/chessboard.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/chess-pieces.html">Chess pieces</a>
    </li>
    <li>
      <a href="../articles/visualization-tools.html">Visualization tools</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/frbcesab/chessboard/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Get started</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/frbcesab/chessboard/blob/HEAD/vignettes/chessboard.Rmd" class="external-link"><code>vignettes/chessboard.Rmd</code></a></small>
      <div class="hidden name"><code>chessboard.Rmd</code></div>

    </div>

    
    
<p>The aim of the package <code>chessboard</code> is to provide tools to
work with <strong>directed</strong> (asymmetric) and
<strong>undirected</strong> (symmetrical) spatial (or non-spatial)
<strong>networks</strong>. It implements different methods to detect
neighbors, all based on the chess game (it goes beyond the rook and the
queen available in many R packages) to create complex connectivity
scenarios.</p>
<p><code>chessboard</code> aims to easily create various network
objects, including:</p>
<ul>
<li>
<strong>node list</strong>, i.e. a list of all nodes of the
network;</li>
<li>
<strong>edge list</strong>, i.e. a list of all edges (links) between
pairs of nodes;</li>
<li>
<strong>connectivity matrix</strong>, i.e. a binary matrix of
dimensions <code>n x n</code>, where <code>n</code> is the number of
<strong>nodes</strong> (sampling units) indicating the presence
(<code>1</code>) or the absence (<code>0</code>) of an
<strong>edge</strong> (link) between pairs of nodes.</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Setup ----</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/frbcesab/chessboard" class="external-link">"chessboard"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://ggplot2.tidyverse.org" class="external-link">"ggplot2"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://patchwork.data-imaginist.com" class="external-link">"patchwork"</a></span><span class="op">)</span></span></code></pre></div>
<p><br></p>
<div class="section level2">
<h2 id="network-properties">Network properties<a class="anchor" aria-label="anchor" href="#network-properties"></a>
</h2>
<p><code>chessboard</code> can handle spatial networks, but it does not
explicitly use geographical coordinates to find neighbors (it is not
based on spatial distance). Instead, it identifies neighbors according
to <strong>node labels</strong> (i.e. the node position on a
two-dimension chessboard) and a specific method (pawn, fool, rook,
bishop, knight, queen, wizard, etc.) derived from the chess game.</p>
<p><br></p>
<div class="figure" style="text-align: center">
<img src="chessboard_files/figure-html/cb-network-1.png" alt="Figure 1. Network as a chessboard" width="60%"><p class="caption">
Figure 1. Network as a chessboard
</p>
</div>
<p><br></p>
<p>The package <code>chessboard</code> is designed to work with
two-dimensional networks (i.e.  sampling on a regular grid), where one
dimension is called <strong>transect</strong> and the other is called
<strong>quadrat</strong>. By convention, the dimension
<strong>transect</strong> corresponds to the x-axis, and the
<strong>quadrat</strong> corresponds to the y-axis (Fig. 1).</p>
<p><code>chessboard</code> can also deal with one-dimensional network
(either <strong>transect-only</strong> or
<strong>quadrat-only</strong>).</p>
<p>The network can be undirected or directed. If the network is
<strong>directed</strong>, it will have (by default) these two
orientations:</p>
<ul>
<li>from bottom to top (along transect) for quadrats</li>
<li>from left to right (along quadrat) for transects</li>
</ul>
<p><br></p>
</div>
<div class="section level2">
<h2 id="neighbors-detection">Neighbors detection<a class="anchor" aria-label="anchor" href="#neighbors-detection"></a>
</h2>
<p><code>chessboard</code> implements the following rules to detect
neighbors and to create edges:</p>
<ul>
<li><p>the <strong>degree</strong> of neighborhood: the number of
adjacent nodes that will be used to create direct edges.</p></li>
<li><p>the <strong>orientation</strong> of neighborhood: can neighbors
be detected horizontally, vertically and/or diagonally?</p></li>
<li><p>the <strong>direction</strong> of neighborhood: does the sampling
has a main direction? This can be particularly relevant for directed
networks (e.g. rivers).</p></li>
</ul>
<p><br></p>
</div>
<div class="section level2">
<h2 id="workflow">Workflow<a class="anchor" aria-label="anchor" href="#workflow"></a>
</h2>
<p>The Figure 2 shows the general workflow and the main features of
<code>chessboard</code>.</p>
<p><br></p>
<div class="figure" style="text-align: center">
<img src="figures/diagramme.png" alt="Figure 2. Workflow and main features of `chessboard`" width="100%"><p class="caption">
Figure 2. Workflow and main features of <code>chessboard</code>
</p>
</div>
<p><br></p>
<div class="section level3">
<h3 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h3>
<p>The package <code>chessboard</code> comes with a real-world example:
a survey sampling along the French river <em>L’Adour</em> (Fig. 3).
<em>L’Adour</em> is a river in southwestern France. It rises in the
Pyrenees and flows into the Atlantic Ocean (Bay of Biscay). It’s
oriented from south-east (upstream) to north-west (downstream).</p>
<p><br></p>
<div class="figure" style="text-align: center">
<img src="figures/map-adour-river.png" alt="Figure 3. Location of the French river L'Adour" width="80%"><p class="caption">
Figure 3. Location of the French river L’Adour
</p>
</div>
<p><br></p>
<p>Along this river, a survey has been realized at
<strong>three</strong> locations (Fig. 4). At each location, a sampling
has been conducted on a regular grid composed of <strong>three</strong>
transects each of them composed of <strong>five</strong> quadrats.</p>
<p><br></p>
<div class="figure" style="text-align: center">
<img src="chessboard_files/figure-html/map-adour-sites-1.png" alt="Figure 4. Survey sampling along the river L'Adour" width="80%"><p class="caption">
Figure 4. Survey sampling along the river L’Adour
</p>
</div>
<p>The arrow in Fig. 4 indicates the direction of the river flow. This
means that our sampling design is a <strong>directed spatial
network</strong> (both inside a location and between locations) where
the main direction is from upstream to downstream.</p>
<p><br></p>
<p>Let’s import this dataset provided by <code>chessboard</code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Import data ----</span></span>
<span><span class="va">path_to_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"adour_survey_sampling.csv"</span>, </span>
<span>                            package <span class="op">=</span> <span class="st">"chessboard"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">sampling</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="va">path_to_file</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">sampling</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 45  5</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># First rows ----</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">sampling</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt;    location transect quadrat longitude latitude</span></span>
<span><span class="co">#&gt; 1         1        1       1  474036.9  6221518</span></span>
<span><span class="co">#&gt; 2         1        1       2  473080.0  6223828</span></span>
<span><span class="co">#&gt; 3         1        1       3  472123.1  6226138</span></span>
<span><span class="co">#&gt; 4         1        1       4  471166.2  6228448</span></span>
<span><span class="co">#&gt; 5         1        1       5  470209.3  6230758</span></span>
<span><span class="co">#&gt; 6         1        2       1  476347.0  6222475</span></span>
<span><span class="co">#&gt; 7         1        2       2  475390.1  6224785</span></span>
<span><span class="co">#&gt; 8         1        2       3  474433.2  6227095</span></span>
<span><span class="co">#&gt; 9         1        2       4  473476.3  6229405</span></span>
<span><span class="co">#&gt; 10        1        2       5  472519.5  6231715</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Last rows ----</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">sampling</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt;    location transect quadrat longitude latitude</span></span>
<span><span class="co">#&gt; 36        3        2      11  414434.2  6312095</span></span>
<span><span class="co">#&gt; 37        3        2      12  411933.7  6312095</span></span>
<span><span class="co">#&gt; 38        3        2      13  409433.2  6312095</span></span>
<span><span class="co">#&gt; 39        3        2      14  406932.8  6312095</span></span>
<span><span class="co">#&gt; 40        3        2      15  404432.3  6312095</span></span>
<span><span class="co">#&gt; 41        3        3      11  414434.2  6314595</span></span>
<span><span class="co">#&gt; 42        3        3      12  411933.7  6314595</span></span>
<span><span class="co">#&gt; 43        3        3      13  409433.2  6314595</span></span>
<span><span class="co">#&gt; 44        3        3      14  406932.8  6314595</span></span>
<span><span class="co">#&gt; 45        3        3      15  404432.3  6314595</span></span></code></pre></div>
<p>This <code>data.frame</code> contains the following columns:</p>
<ul>
<li>
<code>location</code>: the identifier of the location
(<code>numeric</code>)</li>
<li>
<code>transect</code>: the identifier of the transect
(<code>numeric</code>)</li>
<li>
<code>quadrat</code>: the identifier of the quadrat
(<code>numeric</code>)</li>
<li>
<code>longitude</code>: the longitude of the site
(<strong>node</strong>) defined in the <a href="https://epsg.io/2154" class="external-link">RGF93 / Lambert-93</a> projection</li>
<li>
<code>latitude</code>: the latitude of the site
(<strong>node</strong>) defined in the <a href="https://epsg.io/2154" class="external-link">RGF93 / Lambert-93</a> projection</li>
</ul>
<p><strong>N.B.</strong> The column <code>location</code> is optional if
the survey has been conducted at one single location. If the network has
one dimension, one of the columns <code>transect</code> and
<code>quadrat</code> can be omitted. If the survey is not spatial, the
columns <code>longitude</code> and <code>latitude</code> can be
omitted.</p>
<p><br></p>
</div>
<div class="section level3">
<h3 id="node-labels">Node labels<a class="anchor" aria-label="anchor" href="#node-labels"></a>
</h3>
<p>When working with <code>chessboard</code>, the <strong>first
step</strong> is to create node labels with the function
<code><a href="../reference/create_node_labels.html">create_node_labels()</a></code>.</p>
<p><br></p>
<p>But first, let’s reduce the size of data by selecting the first
location.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Select the first location ----</span></span>
<span><span class="va">sampling</span> <span class="op">&lt;-</span> <span class="va">sampling</span><span class="op">[</span><span class="va">sampling</span><span class="op">$</span><span class="st">"location"</span> <span class="op">==</span> <span class="fl">1</span>, <span class="op">]</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">sampling</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 15  5</span></span></code></pre></div>
<p><br></p>
<p>Let’s create node labels with the function
<code><a href="../reference/create_node_labels.html">create_node_labels()</a></code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create node labels ----</span></span>
<span><span class="va">nodes</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_node_labels.html">create_node_labels</a></span><span class="op">(</span>data     <span class="op">=</span> <span class="va">sampling</span>,</span>
<span>                            location <span class="op">=</span> <span class="st">"location"</span>,</span>
<span>                            transect <span class="op">=</span> <span class="st">"transect"</span>,</span>
<span>                            quadrat  <span class="op">=</span> <span class="st">"quadrat"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">nodes</span></span>
<span><span class="co">#&gt;    node location transect quadrat longitude latitude</span></span>
<span><span class="co">#&gt; 1   1-1        1        1       1  474036.9  6221518</span></span>
<span><span class="co">#&gt; 2   1-2        1        1       2  473080.0  6223828</span></span>
<span><span class="co">#&gt; 3   1-3        1        1       3  472123.1  6226138</span></span>
<span><span class="co">#&gt; 4   1-4        1        1       4  471166.2  6228448</span></span>
<span><span class="co">#&gt; 5   1-5        1        1       5  470209.3  6230758</span></span>
<span><span class="co">#&gt; 6   2-1        1        2       1  476347.0  6222475</span></span>
<span><span class="co">#&gt; 7   2-2        1        2       2  475390.1  6224785</span></span>
<span><span class="co">#&gt; 8   2-3        1        2       3  474433.2  6227095</span></span>
<span><span class="co">#&gt; 9   2-4        1        2       4  473476.3  6229405</span></span>
<span><span class="co">#&gt; 10  2-5        1        2       5  472519.5  6231715</span></span>
<span><span class="co">#&gt; 11  3-1        1        3       1  478657.1  6223432</span></span>
<span><span class="co">#&gt; 12  3-2        1        3       2  477700.2  6225742</span></span>
<span><span class="co">#&gt; 13  3-3        1        3       3  476743.4  6228052</span></span>
<span><span class="co">#&gt; 14  3-4        1        3       4  475786.5  6230362</span></span>
<span><span class="co">#&gt; 15  3-5        1        3       5  474829.6  6232672</span></span></code></pre></div>
<p>Node labels are a combination of the transect and the quadrat
identifiers. They must be <strong>unique</strong>.</p>
<p><br></p>
<p>We can visualize this sampling on a Cartesian referential,
i.e. non-spatial, where the x-axis corresponds to
<strong>transects</strong> and the y-axis represents the
<strong>quadrats</strong> (Fig. 5). This new referential is called a
chessboard.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Visualize chessboard ----</span></span>
<span><span class="fu"><a href="../reference/gg_chessboard.html">gg_chessboard</a></span><span class="op">(</span><span class="va">nodes</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="chessboard_files/figure-html/plot-sampling-units-1.png" alt="Figure 5. Sampling survey as a chessboard" width="60%"><p class="caption">
Figure 5. Sampling survey as a chessboard
</p>
</div>
<p><br></p>
<p>The function <code><a href="../reference/get_node_list.html">get_node_list()</a></code> can be used to extract and
order the node list.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Extract node labels ----</span></span>
<span><span class="fu"><a href="../reference/get_node_list.html">get_node_list</a></span><span class="op">(</span><span class="va">nodes</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "1-1" "1-2" "1-3" "1-4" "1-5" "2-1" "2-2" "2-3" "2-4" "2-5" "3-1" "3-2"</span></span>
<span><span class="co">#&gt; [13] "3-3" "3-4" "3-5"</span></span></code></pre></div>
<p><br></p>
</div>
<div class="section level3">
<h3 id="edge-list">Edge list<a class="anchor" aria-label="anchor" href="#edge-list"></a>
</h3>
<p>The creation of a list of edges (links) between nodes (sampling
units) is based on the detection of neighbors.</p>
<p>In <code>chessboard</code> different methods have been implemented to
define neighborhood (argument <code>method</code> of the function
<code><a href="../reference/create_edge_list.html">create_edge_list()</a></code>). These methods are named
<code>'pawn'</code>, <code>'rook'</code>, <code>'bishop'</code>,
<code>'queen'</code>, etc. A complete list of available methods is
available at: <a href="https://frbcesab.github.io/chessboard/reference/index.html#detect-neighbors" class="external-link">https://frbcesab.github.io/chessboard/reference/index.html#detect-neighbors</a></p>
<p><br></p>
<p>Before using the function <code><a href="../reference/create_edge_list.html">create_edge_list()</a></code>, users can
explore these different methods by calling the functions
<code><a href="../reference/pawn.html">pawn()</a></code>, <code><a href="../reference/rook.html">rook()</a></code>, <code><a href="../reference/bishop.html">bishop()</a></code>,
<code><a href="../reference/queen.html">queen()</a></code>, etc. These functions only work on a specific node
(argument <code>focus</code>).</p>
<p><br></p>
<p>Let’s take a look of the neighborhood method <code><a href="../reference/pawn.html">pawn()</a></code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Explore pawn method to find neighbors ----</span></span>
<span><span class="va">neighbors_pawn</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pawn.html">pawn</a></span><span class="op">(</span>nodes    <span class="op">=</span> <span class="va">nodes</span>, </span>
<span>                       focus    <span class="op">=</span> <span class="st">"2-3"</span>, </span>
<span>                       degree   <span class="op">=</span> <span class="fl">1</span>, </span>
<span>                       directed <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>                       reverse  <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">neighbors_pawn</span></span>
<span><span class="co">#&gt;   node location transect quadrat longitude latitude</span></span>
<span><span class="co">#&gt; 1  2-2        1        2       2  475390.1  6224785</span></span>
<span><span class="co">#&gt; 2  2-4        1        2       4  473476.3  6229405</span></span></code></pre></div>
<p><br></p>
<p>The package <code>chessboard</code> contains functions to visualize
detected neighbors on a chessboard: <code><a href="../reference/gg_chessboard.html">gg_chessboard()</a></code> is used
to plot a chessboard (dimensions defined by the node list),
<code><a href="../reference/geom_node.html">geom_node()</a></code> emphasizes the focus node (in red), and
<code><a href="../reference/geom_neighbors.html">geom_neighbors()</a></code> adds the detected neighbors (dots in
black).</p>
<p><br></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/gg_chessboard.html">gg_chessboard</a></span><span class="op">(</span><span class="va">nodes</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/geom_node.html">geom_node</a></span><span class="op">(</span><span class="va">nodes</span>, focus <span class="op">=</span> <span class="st">"2-3"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/geom_neighbors.html">geom_neighbors</a></span><span class="op">(</span><span class="va">nodes</span>, <span class="va">neighbors_pawn</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="chessboard_files/figure-html/nb-pawn-1.png" alt="Figure 6. Detected neighbors (pawn method)" width="50%"><p class="caption">
Figure 6. Detected neighbors (pawn method)
</p>
</div>
<p><br></p>
<p>The function <code><a href="../reference/pawn.html">pawn()</a></code> can detect neighbors vertically,
i.e. among quadrats along a transect. User can change the default
settings by increasing the degree of neighborhood
(<code>degree = 4</code>, Fig. 7A), by adding directionality
(<code>directed = TRUE</code>, Fig. 7B), and by reversing the default
directionality (<code>directed = TRUE</code> and
<code>reverse = TRUE</code>, Fig. 7C).</p>
<div class="figure" style="text-align: center">
<img src="chessboard_files/figure-html/cb-pawn-1.png" alt="Figure 7. Pawn movements" width="100%"><p class="caption">
Figure 7. Pawn movements
</p>
</div>
<p><br></p>
<p>Let’s take another example. The function <code><a href="../reference/bishop.html">bishop()</a></code> can
detect neighbors diagonally. User can change the default settings by
increasing the degree of neighborhood (<code>degree = 4</code>, Fig.
8A), by adding directionality (<code>directed = TRUE</code>, Fig. 8B),
and by reversing the default directionality
(<code>directed = TRUE</code> and <code>reverse = TRUE</code>, Fig.
8C).</p>
<div class="figure" style="text-align: center">
<img src="chessboard_files/figure-html/cb-bishop-1.png" alt="Figure 8. Bishop movements" width="100%"><p class="caption">
Figure 8. Bishop movements
</p>
</div>
<p><br></p>
<p>The vignette <a href="https://frbcesab.github.io/chessboard/articles/chess-pieces.html" class="external-link">Chess
pieces</a> shows all possible methods available in
<code>chessboard</code>.</p>
<p><br></p>
<p>Now, let’s use the function <code><a href="../reference/create_edge_list.html">create_edge_list()</a></code> to create
an edge list using the method <code>'pawn'</code> with a degree
<code>1</code> of neighborhood and in a directional way.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create edge list ----</span></span>
<span><span class="va">edges_pawn</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_edge_list.html">create_edge_list</a></span><span class="op">(</span>nodes    <span class="op">=</span> <span class="va">nodes</span>, </span>
<span>                               method   <span class="op">=</span> <span class="st">"pawn"</span>, </span>
<span>                               degree   <span class="op">=</span> <span class="fl">1</span>, </span>
<span>                               directed <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                               reverse  <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                               self     <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">edges_pawn</span></span>
<span><span class="co">#&gt;    from  to</span></span>
<span><span class="co">#&gt; 1   1-1 1-2</span></span>
<span><span class="co">#&gt; 2   1-2 1-3</span></span>
<span><span class="co">#&gt; 3   1-3 1-4</span></span>
<span><span class="co">#&gt; 4   1-4 1-5</span></span>
<span><span class="co">#&gt; 5   2-1 2-2</span></span>
<span><span class="co">#&gt; 6   2-2 2-3</span></span>
<span><span class="co">#&gt; 7   2-3 2-4</span></span>
<span><span class="co">#&gt; 8   2-4 2-5</span></span>
<span><span class="co">#&gt; 9   3-1 3-2</span></span>
<span><span class="co">#&gt; 10  3-2 3-3</span></span>
<span><span class="co">#&gt; 11  3-3 3-4</span></span>
<span><span class="co">#&gt; 12  3-4 3-5</span></span></code></pre></div>
<p><br></p>
<p>It’s possible to visualize these edges on a map, i.e. by using
spatial coordinates. First, we need to convert our sites into a spatial
object (<code>POINT</code>).</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Convert nodes to sf object ----</span></span>
<span><span class="va">nodes_sf</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="va">nodes</span>, coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"longitude"</span>, <span class="st">"latitude"</span><span class="op">)</span>,</span>
<span>                               crs <span class="op">=</span> <span class="st">"epsg:2154"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">nodes_sf</span><span class="op">)</span></span>
<span><span class="co">#&gt; Simple feature collection with 6 features and 4 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 470209.3 ymin: 6221518 xmax: 476347 ymax: 6230758</span></span>
<span><span class="co">#&gt; Projected CRS: RGF93 v1 / Lambert-93</span></span>
<span><span class="co">#&gt;   node location transect quadrat                 geometry</span></span>
<span><span class="co">#&gt; 1  1-1        1        1       1 POINT (474036.9 6221518)</span></span>
<span><span class="co">#&gt; 2  1-2        1        1       2   POINT (473080 6223828)</span></span>
<span><span class="co">#&gt; 3  1-3        1        1       3 POINT (472123.1 6226138)</span></span>
<span><span class="co">#&gt; 4  1-4        1        1       4 POINT (471166.2 6228448)</span></span>
<span><span class="co">#&gt; 5  1-5        1        1       5 POINT (470209.3 6230758)</span></span>
<span><span class="co">#&gt; 6  2-1        1        2       1   POINT (476347 6222475)</span></span></code></pre></div>
<p><br></p>
<p>Now we can use the function <code><a href="../reference/edges_to_sf.html">edges_to_sf()</a></code> to convert our
edge list into a spatial object (<code>LINESTRING</code>).</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Convert edge list to sf ----</span></span>
<span><span class="va">edges_pawn_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/edges_to_sf.html">edges_to_sf</a></span><span class="op">(</span>edges <span class="op">=</span> <span class="va">edges_pawn</span>, </span>
<span>                             sites <span class="op">=</span> <span class="va">nodes_sf</span><span class="op">)</span></span>
<span></span>
<span><span class="va">edges_pawn_sf</span></span>
<span><span class="co">#&gt; Simple feature collection with 12 features and 2 fields</span></span>
<span><span class="co">#&gt; Geometry type: LINESTRING</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 470209.3 ymin: 6221518 xmax: 478657.1 ymax: 6232672</span></span>
<span><span class="co">#&gt; Projected CRS: RGF93 v1 / Lambert-93</span></span>
<span><span class="co">#&gt; First 10 features:</span></span>
<span><span class="co">#&gt;    from  to                       geometry</span></span>
<span><span class="co">#&gt; 1   1-1 1-2 LINESTRING (474036.9 622151...</span></span>
<span><span class="co">#&gt; 2   1-2 1-3 LINESTRING (473080 6223828,...</span></span>
<span><span class="co">#&gt; 3   1-3 1-4 LINESTRING (472123.1 622613...</span></span>
<span><span class="co">#&gt; 4   1-4 1-5 LINESTRING (471166.2 622844...</span></span>
<span><span class="co">#&gt; 5   2-1 2-2 LINESTRING (476347 6222475,...</span></span>
<span><span class="co">#&gt; 6   2-2 2-3 LINESTRING (475390.1 622478...</span></span>
<span><span class="co">#&gt; 7   2-3 2-4 LINESTRING (474433.2 622709...</span></span>
<span><span class="co">#&gt; 8   2-4 2-5 LINESTRING (473476.3 622940...</span></span>
<span><span class="co">#&gt; 9   3-1 3-2 LINESTRING (478657.1 622343...</span></span>
<span><span class="co">#&gt; 10  3-2 3-3 LINESTRING (477700.2 622574...</span></span></code></pre></div>
<p><br></p>
<p>We can now map our nodes and edges.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Map of nodes and edges ----</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">nodes_sf</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">12</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">edges_pawn_sf</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_light</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="chessboard_files/figure-html/map-edges-list-pawn-1.png" alt="Figure 9. Edge list (pawn method)" width="80%"><p class="caption">
Figure 9. Edge list (pawn method)
</p>
</div>
<p><br></p>
<p>Users may want to combine different methods to detect neighbors to
build complex scenarios. It’s possible by using for each method the
function <code><a href="../reference/create_edge_list.html">create_edge_list()</a></code> and using the function
<code><a href="../reference/append_edge_lists.html">append_edge_lists()</a></code> to merge all edges in a single
list.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create edge list (Bishop method) ----</span></span>
<span><span class="va">edges_bishop</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_edge_list.html">create_edge_list</a></span><span class="op">(</span>nodes    <span class="op">=</span> <span class="va">nodes</span>, </span>
<span>                                 method   <span class="op">=</span> <span class="st">"bishop"</span>, </span>
<span>                                 degree   <span class="op">=</span> <span class="fl">1</span>, </span>
<span>                                 directed <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                 reverse  <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                                 self     <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">edges_bishop</span></span>
<span><span class="co">#&gt;    from  to</span></span>
<span><span class="co">#&gt; 1   1-1 2-2</span></span>
<span><span class="co">#&gt; 2   1-2 2-3</span></span>
<span><span class="co">#&gt; 3   1-3 2-4</span></span>
<span><span class="co">#&gt; 4   1-4 2-5</span></span>
<span><span class="co">#&gt; 5   2-1 1-2</span></span>
<span><span class="co">#&gt; 6   2-1 3-2</span></span>
<span><span class="co">#&gt; 7   2-2 1-3</span></span>
<span><span class="co">#&gt; 8   2-2 3-3</span></span>
<span><span class="co">#&gt; 9   2-3 1-4</span></span>
<span><span class="co">#&gt; 10  2-3 3-4</span></span>
<span><span class="co">#&gt; 11  2-4 1-5</span></span>
<span><span class="co">#&gt; 12  2-4 3-5</span></span>
<span><span class="co">#&gt; 13  3-1 2-2</span></span>
<span><span class="co">#&gt; 14  3-2 2-3</span></span>
<span><span class="co">#&gt; 15  3-3 2-4</span></span>
<span><span class="co">#&gt; 16  3-4 2-5</span></span>
<span></span>
<span><span class="co"># Merge Pawn and Bishop edges ----</span></span>
<span><span class="va">edges</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/append_edge_lists.html">append_edge_lists</a></span><span class="op">(</span><span class="va">edges_pawn</span>, <span class="va">edges_bishop</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Convert edges to spatial layer ----</span></span>
<span><span class="va">edges_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/edges_to_sf.html">edges_to_sf</a></span><span class="op">(</span><span class="va">edges</span>, <span class="va">nodes_sf</span><span class="op">)</span></span></code></pre></div>
<p><br></p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Map of nodes and edges ----</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">nodes_sf</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">12</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">edges_sf</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_light</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="chessboard_files/figure-html/map-edges-list-pawn-bishop-1.png" alt="Figure 10. Edges list (combined methods)" width="80%"><p class="caption">
Figure 10. Edges list (combined methods)
</p>
</div>
<p><br></p>
</div>
<div class="section level3">
<h3 id="connectivity-matrix">Connectivity matrix<a class="anchor" aria-label="anchor" href="#connectivity-matrix"></a>
</h3>
<p>From this edge list, we can build a <strong>connectivity
matrix</strong>, i.e. a binary matrix of dimensions <code>n x n</code>,
where <code>n</code> is the number of nodes (sampling units) indicating
the presence (<code>1</code>) or the absence (<code>0</code>) of an edge
(link) between pairs of nodes.</p>
<p><br></p>
<p>We can use the function <code><a href="../reference/connectivity_matrix.html">connectivity_matrix()</a></code> of the
package <code>chessboard</code>.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create connectivity matrix ----</span></span>
<span><span class="va">conn_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/connectivity_matrix.html">connectivity_matrix</a></span><span class="op">(</span><span class="va">edges</span><span class="op">)</span></span>
<span></span>
<span><span class="va">conn_matrix</span></span>
<span><span class="co">#&gt;     1-1 1-2 1-3 1-4 1-5 2-1 2-2 2-3 2-4 2-5 3-1 3-2 3-3 3-4 3-5</span></span>
<span><span class="co">#&gt; 1-1   0   1   0   0   0   0   1   0   0   0   0   0   0   0   0</span></span>
<span><span class="co">#&gt; 1-2   0   0   1   0   0   0   0   1   0   0   0   0   0   0   0</span></span>
<span><span class="co">#&gt; 1-3   0   0   0   1   0   0   0   0   1   0   0   0   0   0   0</span></span>
<span><span class="co">#&gt; 1-4   0   0   0   0   1   0   0   0   0   1   0   0   0   0   0</span></span>
<span><span class="co">#&gt; 1-5   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0</span></span>
<span><span class="co">#&gt; 2-1   0   1   0   0   0   0   1   0   0   0   0   1   0   0   0</span></span>
<span><span class="co">#&gt; 2-2   0   0   1   0   0   0   0   1   0   0   0   0   1   0   0</span></span>
<span><span class="co">#&gt; 2-3   0   0   0   1   0   0   0   0   1   0   0   0   0   1   0</span></span>
<span><span class="co">#&gt; 2-4   0   0   0   0   1   0   0   0   0   1   0   0   0   0   1</span></span>
<span><span class="co">#&gt; 2-5   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0</span></span>
<span><span class="co">#&gt; 3-1   0   0   0   0   0   0   1   0   0   0   0   1   0   0   0</span></span>
<span><span class="co">#&gt; 3-2   0   0   0   0   0   0   0   1   0   0   0   0   1   0   0</span></span>
<span><span class="co">#&gt; 3-3   0   0   0   0   0   0   0   0   1   0   0   0   0   1   0</span></span>
<span><span class="co">#&gt; 3-4   0   0   0   0   0   0   0   0   0   1   0   0   0   0   1</span></span>
<span><span class="co">#&gt; 3-5   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0</span></span></code></pre></div>
<p><br></p>
<p>The package <code>chessboard</code> provides a function to visualize
this matrix: <code><a href="../reference/gg_matrix.html">gg_matrix()</a></code>.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Visualize connectivity matrix ----</span></span>
<span><span class="fu"><a href="../reference/gg_matrix.html">gg_matrix</a></span><span class="op">(</span><span class="va">conn_matrix</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="chessboard_files/figure-html/plot-connectivity-matrix-1.png" alt="Figure 11. Connectivity matrix" width="80%"><p class="caption">
Figure 11. Connectivity matrix
</p>
</div>
<p><br></p>
<p>Optionally, we can use the function
<code><a href="../reference/matrix_to_edge_list.html">matrix_to_edge_list()</a></code> to convert back the connectivity
matrix to edge list.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Convert connectivity matrix to edge list ----</span></span>
<span><span class="fu"><a href="../reference/matrix_to_edge_list.html">matrix_to_edge_list</a></span><span class="op">(</span><span class="va">conn_matrix</span><span class="op">)</span></span>
<span><span class="co">#&gt;    from  to edge</span></span>
<span><span class="co">#&gt; 1   1-1 1-2    1</span></span>
<span><span class="co">#&gt; 2   1-1 2-2    1</span></span>
<span><span class="co">#&gt; 3   1-2 1-3    1</span></span>
<span><span class="co">#&gt; 4   1-2 2-3    1</span></span>
<span><span class="co">#&gt; 5   1-3 1-4    1</span></span>
<span><span class="co">#&gt; 6   1-3 2-4    1</span></span>
<span><span class="co">#&gt; 7   1-4 1-5    1</span></span>
<span><span class="co">#&gt; 8   1-4 2-5    1</span></span>
<span><span class="co">#&gt; 9   2-1 1-2    1</span></span>
<span><span class="co">#&gt; 10  2-1 2-2    1</span></span>
<span><span class="co">#&gt; 11  2-1 3-2    1</span></span>
<span><span class="co">#&gt; 12  2-2 1-3    1</span></span>
<span><span class="co">#&gt; 13  2-2 2-3    1</span></span>
<span><span class="co">#&gt; 14  2-2 3-3    1</span></span>
<span><span class="co">#&gt; 15  2-3 1-4    1</span></span>
<span><span class="co">#&gt; 16  2-3 2-4    1</span></span>
<span><span class="co">#&gt; 17  2-3 3-4    1</span></span>
<span><span class="co">#&gt; 18  2-4 1-5    1</span></span>
<span><span class="co">#&gt; 19  2-4 2-5    1</span></span>
<span><span class="co">#&gt; 20  2-4 3-5    1</span></span>
<span><span class="co">#&gt; 21  3-1 2-2    1</span></span>
<span><span class="co">#&gt; 22  3-1 3-2    1</span></span>
<span><span class="co">#&gt; 23  3-2 2-3    1</span></span>
<span><span class="co">#&gt; 24  3-2 3-3    1</span></span>
<span><span class="co">#&gt; 25  3-3 2-4    1</span></span>
<span><span class="co">#&gt; 26  3-3 3-4    1</span></span>
<span><span class="co">#&gt; 27  3-4 2-5    1</span></span>
<span><span class="co">#&gt; 28  3-4 3-5    1</span></span></code></pre></div>
<p><br></p>
</div>
</div>
<div class="section level2">
<h2 id="extending-chessboard">Extending chessboard<a class="anchor" aria-label="anchor" href="#extending-chessboard"></a>
</h2>
<p><code>chessboard</code> has been built to be compatible with the
following R packages: <a href="https://r.igraph.org/" class="external-link"><code>igraph</code></a> (Csardi &amp;
Nepusz 2006), <a href="https://r-spatial.github.io/sf/" class="external-link"><code>sf</code></a> (Pebesma
2018), and <a href="https://ggplot2.tidyverse.org" class="external-link"><code>ggplot2</code></a> (Wickham
2016).</p>
<p><br></p>
<div class="section level3">
<h3 id="with-sf">with <code>sf</code><a class="anchor" aria-label="anchor" href="#with-sf"></a>
</h3>
<p>As seen before, the edge list can be converted into an spatial object
with the function <code><a href="../reference/edges_to_sf.html">edges_to_sf()</a></code>. The output is an
<code>sf</code> <code>LINESTRING</code> that can be handled by many
functions of the package <code>sf</code>. For instance, let’s project
the coordinate system.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Convert edges to spatial layer ----</span></span>
<span><span class="va">edges_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/edges_to_sf.html">edges_to_sf</a></span><span class="op">(</span><span class="va">edges</span>, <span class="va">nodes_sf</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Project the CRS ----</span></span>
<span><span class="va">edges_sf_lonlat</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span><span class="va">edges_sf</span>, crs <span class="op">=</span> <span class="st">"epsg:4326"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check ----</span></span>
<span><span class="va">edges_sf</span></span>
<span><span class="co">#&gt; Simple feature collection with 28 features and 2 fields</span></span>
<span><span class="co">#&gt; Geometry type: LINESTRING</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 470209.3 ymin: 6221518 xmax: 478657.1 ymax: 6232672</span></span>
<span><span class="co">#&gt; Projected CRS: RGF93 v1 / Lambert-93</span></span>
<span><span class="co">#&gt; First 10 features:</span></span>
<span><span class="co">#&gt;    from  to                       geometry</span></span>
<span><span class="co">#&gt; 1   1-1 1-2 LINESTRING (474036.9 622151...</span></span>
<span><span class="co">#&gt; 2   1-1 2-2 LINESTRING (474036.9 622151...</span></span>
<span><span class="co">#&gt; 3   1-2 1-3 LINESTRING (473080 6223828,...</span></span>
<span><span class="co">#&gt; 4   1-2 2-3 LINESTRING (473080 6223828,...</span></span>
<span><span class="co">#&gt; 5   1-3 1-4 LINESTRING (472123.1 622613...</span></span>
<span><span class="co">#&gt; 6   1-3 2-4 LINESTRING (472123.1 622613...</span></span>
<span><span class="co">#&gt; 7   1-4 1-5 LINESTRING (471166.2 622844...</span></span>
<span><span class="co">#&gt; 8   1-4 2-5 LINESTRING (471166.2 622844...</span></span>
<span><span class="co">#&gt; 9   2-1 1-2 LINESTRING (476347 6222475,...</span></span>
<span><span class="co">#&gt; 10  2-1 2-2 LINESTRING (476347 6222475,...</span></span>
<span><span class="va">edges_sf_lonlat</span></span>
<span><span class="co">#&gt; Simple feature collection with 28 features and 2 fields</span></span>
<span><span class="co">#&gt; Geometry type: LINESTRING</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 0.1770395 ymin: 43.05727 xmax: 0.2838317 ymax: 43.15778</span></span>
<span><span class="co">#&gt; Geodetic CRS:  WGS 84</span></span>
<span><span class="co">#&gt; First 10 features:</span></span>
<span><span class="co">#&gt;    from  to                       geometry</span></span>
<span><span class="co">#&gt; 1   1-1 1-2 LINESTRING (0.2280052 43.05...</span></span>
<span><span class="co">#&gt; 2   1-1 2-2 LINESTRING (0.2280052 43.05...</span></span>
<span><span class="co">#&gt; 3   1-2 1-3 LINESTRING (0.2152773 43.07...</span></span>
<span><span class="co">#&gt; 4   1-2 2-3 LINESTRING (0.2152773 43.07...</span></span>
<span><span class="co">#&gt; 5   1-3 1-4 LINESTRING (0.2025404 43.09...</span></span>
<span><span class="co">#&gt; 6   1-3 2-4 LINESTRING (0.2025404 43.09...</span></span>
<span><span class="co">#&gt; 7   1-4 1-5 LINESTRING (0.1897944 43.11...</span></span>
<span><span class="co">#&gt; 8   1-4 2-5 LINESTRING (0.1897944 43.11...</span></span>
<span><span class="co">#&gt; 9   2-1 1-2 LINESTRING (0.2559139 43.06...</span></span>
<span><span class="co">#&gt; 10  2-1 2-2 LINESTRING (0.2559139 43.06...</span></span></code></pre></div>
<p>User can also export this spatial layer.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Export layer as a GeoPackage ----</span></span>
<span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_write.html" class="external-link">st_write</a></span><span class="op">(</span><span class="va">edges_sf</span>, <span class="st">"edge_list.gpkg"</span><span class="op">)</span></span></code></pre></div>
<p>For more information about the package <code>sf</code>, please visit
the <a href="https://cran.r-project.org/web/packages/sf/sf.pdf" class="external-link">manual</a>.</p>
<p><br></p>
</div>
<div class="section level3">
<h3 id="with-ggplot2">with <code>ggplot2</code><a class="anchor" aria-label="anchor" href="#with-ggplot2"></a>
</h3>
<p>All plotting functions in <code>chessboard</code> are produced with
the <code>ggplot2</code> engine and are highly customizable. For
instance, let’s change the default theme.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Change default ggplot2 theme ----</span></span>
<span><span class="fu"><a href="../reference/gg_matrix.html">gg_matrix</a></span><span class="op">(</span><span class="va">conn_matrix</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="chessboard_files/figure-html/change-theme-1.png" alt="Figure 12. Custom connectivity matrix" width="80%"><p class="caption">
Figure 12. Custom connectivity matrix
</p>
</div>
<p>For more information about the package <code>ggplot2</code>, please
visit the <a href="https://cran.r-project.org/web/packages/ggplot2/ggplot2.pdf" class="external-link">manual</a>.</p>
<p><br></p>
</div>
<div class="section level3">
<h3 id="with-igraph">with <code>igraph</code><a class="anchor" aria-label="anchor" href="#with-igraph"></a>
</h3>
<p>The package <code>igraph</code> is commonly use to analyze network
data. User can use the function
<code><a href="https://r.igraph.org/reference/graph_from_data_frame.html" class="external-link">igraph::graph_from_data_frame()</a></code> to convert the edge list
created with <code>chessboard</code> to an <code>igraph</code>
object.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Convert edge list to igraph object ----</span></span>
<span><span class="va">igraph_obj</span> <span class="op">&lt;-</span> <span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://r.igraph.org/reference/graph_from_data_frame.html" class="external-link">graph_from_data_frame</a></span><span class="op">(</span>d        <span class="op">=</span> <span class="va">edges</span>, </span>
<span>                                            directed <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                                            vertices <span class="op">=</span> <span class="va">nodes</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check -----</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">igraph_obj</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "igraph"</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">igraph_obj</span><span class="op">)</span></span>
<span><span class="co">#&gt; IGRAPH 654075e DN-- 15 28 -- </span></span>
<span><span class="co">#&gt; + attr: name (v/c), location (v/n), transect (v/n), quadrat (v/n),</span></span>
<span><span class="co">#&gt; | longitude (v/n), latitude (v/n)</span></span>
<span><span class="co">#&gt; + edges from 654075e (vertex names):</span></span>
<span><span class="co">#&gt;  [1] 1-1-&gt;1-2 1-1-&gt;2-2 1-2-&gt;1-3 1-2-&gt;2-3 1-3-&gt;1-4 1-3-&gt;2-4 1-4-&gt;1-5 1-4-&gt;2-5</span></span>
<span><span class="co">#&gt;  [9] 2-1-&gt;1-2 2-1-&gt;2-2 2-1-&gt;3-2 2-2-&gt;1-3 2-2-&gt;2-3 2-2-&gt;3-3 2-3-&gt;1-4 2-3-&gt;2-4</span></span>
<span><span class="co">#&gt; [17] 2-3-&gt;3-4 2-4-&gt;1-5 2-4-&gt;2-5 2-4-&gt;3-5 3-1-&gt;2-2 3-1-&gt;3-2 3-2-&gt;2-3 3-2-&gt;3-3</span></span>
<span><span class="co">#&gt; [25] 3-3-&gt;2-4 3-3-&gt;3-4 3-4-&gt;2-5 3-4-&gt;3-5</span></span></code></pre></div>
<p>Let’s plot our network using <code>igraph</code>.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot the network w/ igraph ----</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">igraph_obj</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="chessboard_files/figure-html/plot-igraph-1.png" alt="Figure 13. Network visualization w/ `igraph`" width="80%"><p class="caption">
Figure 13. Network visualization w/ <code>igraph</code>
</p>
</div>
<p>For more information about the package <code>igraph</code>, please
visit the <a href="https://cran.r-project.org/web/packages/igraph/igraph.pdf" class="external-link">manual</a>.</p>
<p><br></p>
</div>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>Bivand R &amp; Wong D (2018) Comparing implementations of global and
local indicators of spatial association. <strong>TEST</strong>, 27,
716–748. <a href="https://doi.org/10.1007/s11749-018-0599-x" class="external-link uri">https://doi.org/10.1007/s11749-018-0599-x</a>.</p>
<p>Csardi G &amp; Nepusz T (2006) The igraph software package for
complex network research. <strong>InterJournal, Complex
Systems</strong>, 1695, 1–9. <a href="https://igraph.org/" class="external-link uri">https://igraph.org/</a>.</p>
<p>Pebesma E (2018) Simple Features for R: Standardized support for
spatial vector data. <strong>The R Journal</strong>, 10, 439–446. <a href="https://doi.org/10.32614/RJ-2018-009" class="external-link uri">https://doi.org/10.32614/RJ-2018-009</a>.</p>
<p>Wickham H (2016) <em>ggplot2: Elegant graphics for data analysis</em>
(p. 213). Springer-Verlag. <a href="https://ggplot2.tidyverse.org/" class="external-link uri">https://ggplot2.tidyverse.org/</a>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Nicolas Casajus, Erica Rievrs Borges, Eric Tabacchi, Guillaume Fried, Nicolas Mouquet.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
